[Unit]
Description=MSI EC module loader (smart detection)
After=multi-user.target
Before=graphical.target
ConditionVirtualization=!container

[Service]
Type=oneshot
RemainAfterExit=yes
ExecStart=/usr/local/bin/msi-ec-smart-load
ExecStop=/sbin/rmmod msi_ec
# Ignorar errores si no es MSI
SuccessExitStatus=0 1

[Install]
WantedBy=multi-user.target
